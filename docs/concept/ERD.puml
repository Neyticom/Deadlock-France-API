@startuml
entity "User" as user {
  * id : INT [PK]
  --
  login : VARCHAR(32) NOT NULL UNIQUE
  password : VARCHAR(96) NOT NULL UNIQUE
  role_id : INT NOT NULL [FK]
  firstname : VARCHAR(64) NOT NULL
  lastname : VARCHAR(64) NOT NULL
  nickname : VARCHAR(64) NOT NULL UNIQUE
  email : VARCHAR(320) NOT NULL UNIQUE  
  2fa : BOOLEAN
}

entity "Role" as role {
  * id : INT [PK]
  --
  name : VARCHAR(32) NOT NULL UNIQUE
  weight : INT NOT NULL UNIQUE
}

entity "Patchnote" as patchnote {
  * id : INT [PK]
  --
  version : VARCHAR(20) NOT NULL UNIQUE 
  title : VARCHAR(96) NOT NULL
  date : TIMESTAMP NOT NULL UNIQUE
  author : VARCHAR(64)
  content : TEXT
  state : ENUM('DRAFT','PUBLISHED','ARCHIVED') NOT NULL
}

entity "PatchnotePublishers" as patchnote_publishers {
  user_id : INT NOT NULL [FK]
  --
  patchnote_id : INT NOT NULL [FK]
}

entity "Statistic" as statistic {
  * id : INT [PK]
  --
  origin : VARCHAR(96) NOT NULL
  count : INT NOT NULL
  date : TIMESTAMP NOT NULL UNIQUE
  type : ENUM('VIEW','CLICK') NOT NULL
}

entity "Setting" as setting {
  * id : INT [PK]
  --
  key : VARCHAR(64) NOT NULL UNIQUE
  value : TEXT
  type : ENUM('URL','PATH','TEXT') NOT NULL
}

entity "Log" as log {
  * id : INT [PK]
  --
  action : ENUM('LOGIN','CREATE','DELETE','EDIT') NOT NULL
  context : TEXT
  user_id : INT NOT NULL [FK]
  ip : VARCHAR(15) NOT NULL
}

role ||--o{ user
user ||--o{ log
patchnote_publishers }o--|| patchnote
patchnote_publishers }o--|| user
@enduml

Entity Relationship Diagram : [https://www.plantuml.com/plantuml/duml/bLDHRvim47xdLrXzIJSDQUksIjjJQU8kg8Gm0jcaQgeyuYPM7HjXqovg-jzt1X63HeZsaXo-ptVVzztvIcbIw7BB7IeqqpjqbYfQd26YK0a1Ud4GUelO2dr5VfYWk-Zs5vouBlnmkMO2pfTUF9vwyVd7YpSed2SeJ8C0fQ7_FSM0oebIpx9OjO1VBlk0XUJqlcbaytStLSS7LYWjo9Qswbn-idKC7t8A8LZsE82mNEYMCDwHzluV6480l7WW0BkUpmFiXSwhSt0n1ZMLYqRMa8kMpu29pvIjDzfQqqwtkqP4PniXTTqwRxw6-Z_HGZ7PdcEVLW121qwFJ17IAw9DDl5dU95uiwX71IdrHXPTy-4uaqA307CP_qpWGEcw5WxJsVbe4ditoUZTA4gl0tynnHE8pNr_2Q6bq6j3LFxcJ6r0OjUG-_oGCDvKgzwxUzOdUxSVr-w_005CQPPLNLNpDJG6MJ1uJSVjpMGfx0ByZ-jwbripbpx-0VwD0tzyUyIy1TMQYNLDlOw7Y3_ItSddz4HuIUryEupIE333zP8f_1d04Lg1h2bnEKY7P9f9SQWUpB_veH4SOo_144nmWAi0J_nsgsOF_zWzFB4LB6_f_l2voxfwzVkzwygNgenZVfe3aE3qhkAhTDtztgxQ8AegUqN5gjpolm00]
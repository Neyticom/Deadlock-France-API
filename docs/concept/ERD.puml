@startuml
entity "User" as user {
  * id : INT [PK]
  --
  login : VARCHAR(32) NOT NULL UNIQUE
  password : VARCHAR(96) NOT NULL UNIQUE
  role_id : INT NOT NULL [FK]
  firstname : VARCHAR(64) NOT NULL
  lastname : VARCHAR(64) NOT NULL
  nickname : VARCHAR(64) NOT NULL UNIQUE
  email : VARCHAR(320) NOT NULL UNIQUE  
  2fa : BOOLEAN
}

entity "Role" as role {
  * id : INT [PK]
  --
  name : VARCHAR(32) NOT NULL UNIQUE
  weight : INT NOT NULL UNIQUE
}

entity "Patchnote" as patchnote {
  * id : INT [PK]
  --
  version : VARCHAR(20) NOT NULL UNIQUE 
  title : VARCHAR(96) NOT NULL
  date : TIMESTAMP NOT NULL UNIQUE
  author : VARCHAR(64)
  content : TEXT
  state : ENUM('DRAFT','PUBLISHED','ARCHIVED') NOT NULL
}

entity "Hero" as hero {
  * id : INT [PK]
  --
  name : VARCHAR(64) NOT NULL UNIQUE
  resume : VARCHAR(96) NOT NULL UNIQUE
  description : TEXT NOT NULL UNIQUE
  img_pass : VARCHAR(128) UNIQUE
  video_pass : VARCHAR(128) UNIQUE
}

entity "Item" as item {
  * id : INT [PK]
  --
  
}

entity "Ability" as ability {
  * id : INT [PK]
  --
  
}

entity "Keyword" as keyword {
  * id : INT [PK]
  --
  entity_type : ENUM('HERO','ITEM','ABILITY') NOT NULL
  entity_id : INT NOT NULL [FK]
  keyword : VARCHAR(64) NOT NULL UNIQUE
}

entity "PatchnotePublishers" as patchnote_publishers {
  user_id : INT NOT NULL [FK]
  --
  patchnote_id : INT NOT NULL [FK]
}

entity "Statistic" as statistic {
  * id : INT [PK]
  --
  origin : VARCHAR(96) NOT NULL
  count : INT NOT NULL
  date : TIMESTAMP NOT NULL UNIQUE
  type : ENUM('VIEW','CLICK') NOT NULL
}

entity "Setting" as setting {
  * id : INT [PK]
  --
  key : VARCHAR(64) NOT NULL UNIQUE
  value : TEXT
  type : ENUM('URL','PATH','TEXT') NOT NULL
}

entity "Log" as log {
  * id : INT [PK]
  --
  action : ENUM('LOGIN','CREATE','DELETE','EDIT') NOT NULL
  context : TEXT
  user_id : INT NOT NULL [FK]
  ip : VARCHAR(15) NOT NULL
}

role ||--o{ user
user ||--o{ log
patchnote_publishers }o--|| patchnote
patchnote_publishers }o--|| user
@enduml

Entity Relationship Diagram : [https://www.plantuml.com/plantuml/duml/bLNVJzim47xlNs7n0aohjB4DRNiYKBDQf6cN9cmJcYgJcjOYZQlOWI7A_xwpes17ImnxII_sTp--k_lI4wbegQfDFc25uke1xQMIbNk8IbI1WHu72Br1V8c-8X8bw6fsyHjEXaDuv6B52pY_3EApSH0VV3WwHD4qGL4QXYYDoFSK0sfBfRmNvT81VZdk0fOYPuicaRs_EZSPRtWfLK4tp8bp_D76qVNGbn05psuz25iBsr2UjwYz-mU6402FRYZ0JgVJ40VHu6dmtCKOs9WkQbg-BjfwF4syPtorLcvhxBMRTKPLjYw4gbDlcpTV_ZjMIYxSENPn1I1ao5dF5E5wIPM-JSW4pvDWCkjWGIkr5cMx-N2SYK810UsCVoPm85KT2qVfv61_50VdoVxR_Lbw6fBv68_0rlxa4anRWjk6CIk5wS0Q31_vLor3oMHbOFxzNJAPbNohJ3CDbGuGtwmMMX5EjFT7dmyju8ulcV1179f4iOsXoS7mqNITWckUWs7yQ6s_rlM2FMWb6zVRslQvrcuBzR2rmnpZU0hp8mcUw36Uaf0alvmfMhVUBq6JsJ-sBb7CgkkSIzW9sPR7OljyOVZe3rz_ViFD-dRZtFnpHHMNYcScgspUVAqJ9L_nebzicQWALVlzfmPRqxWa-0UCuImaPnSzKfepfNYngaklRL_XC9mNzNH7yufPjRSgIkDGIpr8nl2Z0JrbXQ8kAHVUScXcvDX43wVVIAG9npX8C1WZ769Zu15nKpLVfJ_ArkdV2hvrzVgfNRNv3zZjXaFnQC8CzACv00g3pbLy4iFXRcTNpOioOKzOiQms-Ly0]